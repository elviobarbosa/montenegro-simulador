{"version":3,"file":"ultimos-posts/view.js","mappings":";;;;;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM;EACnD,MAAMC,SAAS,GAAGF,QAAQ,CAACG,aAAa,CAAC,0BAA0B,CAAC;EACpE,MAAMC,KAAK,GAAGJ,QAAQ,CAACG,aAAa,CAAC,+BAA+B,CAAC;EACrE,MAAME,OAAO,GAAGL,QAAQ,CAACG,aAAa,CAAC,UAAU,CAAC;EAElD,IAAID,SAAS,IAAIE,KAAK,EAAE;IACvBA,KAAK,CAACH,gBAAgB,CAAC,OAAO,EAAGK,CAAC,IAAK;MACtCA,CAAC,CAACC,cAAc,EAAE;MAElB,IAAIC,KAAK,GAAGC,QAAQ,CAACP,SAAS,CAACQ,OAAO,CAACF,KAAK,EAAE,EAAE,CAAC,GAAG,CAAC;MACrD,IAAIG,QAAQ,GAAGF,QAAQ,CAACP,SAAS,CAACQ,OAAO,CAACC,QAAQ,EAAE,EAAE,CAAC;MAEvD,IAAIN,OAAO,EAAE;QACZA,OAAO,CAACO,KAAK,CAACC,OAAO,GAAG,OAAO;MAChC;MACAT,KAAK,CAACU,QAAQ,GAAG,IAAI;MACrBV,KAAK,CAACW,WAAW,GAAG,eAAe;MAEnCC,KAAK,CACH,GAAEC,MAAM,CAACC,QAAQ,CAACC,MAAO,4DAA2DX,KAAM,EAAC,CAC5F,CACCY,IAAI,CAAEC,GAAG,IAAK;QACd,IAAI,CAACA,GAAG,CAACC,EAAE,EAAE;UACZ,MAAM,IAAIC,KAAK,CAAC,oBAAoB,CAAC;QACtC;QACA,OAAOF,GAAG,CAACG,IAAI,EAAE;MAClB,CAAC,CAAC,CACDJ,IAAI,CAAEK,IAAI,IAAK;QACf,IAAIA,IAAI,CAACC,IAAI,EAAE,EAAE;UAChB,MAAMC,OAAO,GAAGzB,SAAS,CAACC,aAAa,CAAC,uBAAuB,CAAC;UAChEwB,OAAO,CAACC,kBAAkB,CAAC,UAAU,EAAEH,IAAI,CAAC;UAC5CvB,SAAS,CAACQ,OAAO,CAACF,KAAK,GAAGA,KAAK;UAE/B,IAAIA,KAAK,IAAIG,QAAQ,EAAE;YACtBP,KAAK,CAACQ,KAAK,CAACC,OAAO,GAAG,MAAM;UAC7B;QACD,CAAC,MAAM;UACNT,KAAK,CAACQ,KAAK,CAACC,OAAO,GAAG,MAAM;QAC7B;MACD,CAAC,CAAC,CACDgB,KAAK,CAAEC,KAAK,IAAK;QACjBC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/CE,KAAK,CAAC,+CAA+C,CAAC;MACvD,CAAC,CAAC,CACDC,OAAO,CAAC,MAAM;QACd,IAAI5B,OAAO,EAAE;UACZA,OAAO,CAACO,KAAK,CAACC,OAAO,GAAG,MAAM;QAC/B;QACAT,KAAK,CAACU,QAAQ,GAAG,KAAK;QACtBV,KAAK,CAACW,WAAW,GAAG,eAAe;MACpC,CAAC,CAAC;IACJ,CAAC,CAAC;EACH;AACD,CAAC,CAAC,C","sources":["webpack://beta-digital-blocks/./src/ultimos-posts/view.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n\tconst container = document.querySelector(\"#ultimos-posts-container\");\n\tconst botao = document.querySelector(\"[data-js=carregar-mais-posts]\");\n\tconst loading = document.querySelector(\"#loading\");\n\n\tif (container && botao) {\n\t\tbotao.addEventListener(\"click\", (e) => {\n\t\t\te.preventDefault();\n\n\t\t\tlet paged = parseInt(container.dataset.paged, 10) + 1;\n\t\t\tlet maxPages = parseInt(container.dataset.maxPages, 10);\n\n\t\t\tif (loading) {\n\t\t\t\tloading.style.display = \"block\";\n\t\t\t}\n\t\t\tbotao.disabled = true;\n\t\t\tbotao.textContent = \"Carregando...\";\n\n\t\t\tfetch(\n\t\t\t\t`${window.location.origin}/wp-admin/admin-ajax.php?action=carregar_mais_posts&page=${paged}`\n\t\t\t)\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (!res.ok) {\n\t\t\t\t\t\tthrow new Error(\"Erro na requisição\");\n\t\t\t\t\t}\n\t\t\t\t\treturn res.text();\n\t\t\t\t})\n\t\t\t\t.then((html) => {\n\t\t\t\t\tif (html.trim()) {\n\t\t\t\t\t\tconst wrapper = container.querySelector(\".item-post:last-child\");\n\t\t\t\t\t\twrapper.insertAdjacentHTML(\"afterend\", html);\n\t\t\t\t\t\tcontainer.dataset.paged = paged;\n\n\t\t\t\t\t\tif (paged >= maxPages) {\n\t\t\t\t\t\t\tbotao.style.display = \"none\";\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbotao.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(\"Erro ao carregar posts:\", error);\n\t\t\t\t\talert(\"Erro ao carregar mais posts. Tente novamente.\");\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tif (loading) {\n\t\t\t\t\t\tloading.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t\tbotao.disabled = false;\n\t\t\t\t\tbotao.textContent = \"Carregar mais\";\n\t\t\t\t});\n\t\t});\n\t}\n});\n"],"names":["document","addEventListener","container","querySelector","botao","loading","e","preventDefault","paged","parseInt","dataset","maxPages","style","display","disabled","textContent","fetch","window","location","origin","then","res","ok","Error","text","html","trim","wrapper","insertAdjacentHTML","catch","error","console","alert","finally"],"sourceRoot":""}